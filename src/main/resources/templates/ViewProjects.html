<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Projects ‚Ä¢ Gajmor Design</title>

    <link rel="stylesheet" href="/CSS/style.css" />
    <link rel="stylesheet" th:href="@{/CSS/style.css}" />
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" />

    <style>
        body {
            background: #f4f4f4;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        /* Page Wrapper */
        .project-wrapper {
            padding: 120px 20px 40px;
            max-width: 1500px;
            margin: auto;
        }

        .section-box {
            background: white;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .section-box h2 {
            border-left: 5px solid #ff9800;
            padding-left: 10px;
            margin-bottom: 20px;
            color: black;
            font-weight: bold;
        }

        /* Projects Grid */
        .project-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 20px;
        }

        .project-card {
            background: #fff;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
            transition: 0.3s ease;
            cursor: pointer;
            animation: fadeUp 0.5s ease;
        }

        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.25);
        }

        .project-card img {
            width: 100%;
            height: 190px;
            object-fit: cover;
        }

        .project-title {
            text-align: center;
            padding: 10px;
            font-weight: bold;
            font-size: 17px;
        }

        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(20px); }
            to   { opacity: 1; transform: translateY(0); }
        }

        /* Modal */
        .modal-bg {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(5px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 999;
            padding: 15px;
        }

        .modal-box {
            background: #fff;
            width: 95%;
            max-width: 900px;
            max-height: 90vh;
            border-radius: 12px;
            overflow-y: auto;
            padding: 20px;
            animation: scaleIn 0.35s ease;
            position: relative;
        }

        @keyframes scaleIn {
            from { transform: scale(0.8); opacity: 0; }
            to   { transform: scale(1); opacity: 1; }
        }

        .close-btn {
            background: #ff4444;
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            border: none;
            position: absolute;
            right: 20px;
            top: 15px;
            cursor: pointer;
        }

        /* Image scroll strip */
        .modal-images {
            display: flex;
            overflow-x: auto;
            gap: 15px;
            margin: 15px 0;
        }

        .modal-images img {
            height: 250px;
            border-radius: 10px;
            object-fit: cover;
        }

        @media (max-width: 600px) {
            .modal-images img { height: 180px; }
            .project-card img { height: 150px; }
        }
    </style>
</head>

<body>

<!-- NAVBAR -->
<div class="nav" id="navbar">
    <div class="logo">
        <img src="/Images/GajmorLogo.png" alt="GajmorLogo" />
    </div>

    <div class="links" id="navLinks">
        <a href="/">HOME</a>

        <div th:if="${session.login}" class="session">
            <a href="/add-Projects">ADD PROJECT</a>
            <a href="/enquires" style="margin-left:50px;">ALL ENQUIRIES</a>
        </div>

        <a href="/services">OUR SERVICES</a>
        <a href="/careers">CAREERS</a>
        <a href="/aboutUs">ABOUT US</a>
        <a href="/enquiry">CONTACTS</a>

        <!-- Highlight Projects -->
        <a href="/projects" style="color: rgb(255, 153, 0); font-weight:bold;">PROJECTS</a>
    </div>

    <div class="menu">
        <i class='bx bx-menu' onclick="openMenu()"></i>
    </div>
</div>

<!-- Overlay + Sidebar (same your style) -->
<div id="overlay" class="overlay" onclick="closeMenu()"></div>

<div id="sidebar" class="sidebar">
    <span class="closebtn" onclick="closeMenu()"><i class='bx bx-x'></i></span>

    <img src="/Images/GajmorLogo.png" class="sidebar-logo" />

    <h2>Our Gallery</h2>
    <div class="gallery">
        <img src="/Images/Walldrobe/walldrobe2.jpg" />
        <img src="https://source.unsplash.com/100x100/?interior,kitchen" />
        <img src="https://source.unsplash.com/100x100/?interior,bedroom" />
        <img src="https://source.unsplash.com/100x100/?interior,design" />
        <img src="https://source.unsplash.com/100x100/?interior,room" />
        <img src="https://source.unsplash.com/100x100/?interior,furniture" />
    </div>

    <ul class="sidebar-menu">
        <li><a href="/">üè† Home</a></li>
        <li><a href="/about">‚ÑπÔ∏è About</a></li>
        <li><a href="/services">üíº Services</a></li>
        <li><a href="/projects">üìÇ Projects</a></li>
        <li><a href="/careers">üßë‚Äçüíº Careers</a></li>
    </ul>
</div>

<!-- MAIN PROJECT PAGE -->
<div class="project-wrapper">

    <!-- COMMERCIAL -->
    <div class="section-box">
        <h2>üè¢ Commercial Projects</h2>
        <div class="project-grid" id="commercialGrid"></div>
    </div>

    <!-- RESIDENTIAL -->
    <div class="section-box">
        <h2>üè† Residential Projects</h2>
        <div class="project-grid" id="residentialGrid"></div>
    </div>

</div>

<!-- MODAL -->
<div class="modal-bg" id="projectModal">
    <div class="modal-box">
        <button class="close-btn" onclick="closeModal()">Close</button>
        <h2 id="modalTitle"></h2>

        <div class="modal-images" id="modalImages"></div>

        <p><strong>üìç Location:</strong> <span id="modalLocation"></span></p>
        <p><strong>üìê Area:</strong> <span id="modalArea"></span></p>
        <p><strong>üìù Description:</strong> <span id="modalDescription"></span></p>
    </div>
</div>

<script>
    fetch('/projects/list')
        .then(res => res.json())
        .then(projects => {
            const commercial = document.getElementById('commercialGrid');
            const residential = document.getElementById('residentialGrid');

            projects.forEach(project => {
                const card = document.createElement('div');
                card.classList.add('project-card');

                const firstImg =
                    project.images.length > 0
                        ? `/uploads/${project.images[0].imagePath}`
                        : "https://via.placeholder.com/300x200?text=No+Image";

                card.innerHTML = `
                    <img src="${firstImg}">
                    <div class="project-title">${project.name}</div>
                `;

                card.onclick = () => openModal(project);

                if (project.projectType === "Commercial") {
                    commercial.appendChild(card);
                } else {
                    residential.appendChild(card);
                }
            });
        });

    function openModal(project) {
        document.getElementById("modalTitle").innerHTML = project.name;

        document.getElementById("modalImages").innerHTML =
            project.images.map(img => `<img src="/uploads/${img.imagePath}">`).join("");

        document.getElementById("modalLocation").innerHTML = project.location || "Not Available";
        document.getElementById("modalArea").innerHTML = project.area || "Not Available";
        document.getElementById("modalDescription").innerHTML = project.description || "No description available.";

        document.getElementById("projectModal").style.display = "flex";
    }

    function closeModal() {
        document.getElementById("projectModal").style.display = "none";
    }
</script>

</body>

<!-- FOOTER FRAGMENT -->
<div th:replace="fragments/footer :: site-footer"></div>

</html>
